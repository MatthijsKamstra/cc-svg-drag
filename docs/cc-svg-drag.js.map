{
"version":3,
"file":"cc-svg-drag.js",
"sourceRoot":"file:///",
"sources":["/Users/matthijs/Documents/GIT/cc-svg-drag/src/MainSVGDrag.hx","/Users/matthijs/Documents/GIT/cc-svg-drag/src/App.hx","/usr/local/lib/haxe/std/js/_std/Std.hx","/usr/local/lib/haxe/std/js/Boot.hx"],
"sourcesContent":["package;\r\n\r\nimport js.html.svg.Rect;\r\nimport js.html.svg.Transform;\r\nimport js.html.MouseEvent;\r\nimport js.html.svg.GraphicsElement;\r\nimport js.html.DOMElement;\r\nimport js.html.svg.SVGElement;\r\nimport js.Browser.*;\r\nimport App;\r\n\r\nclass MainSVGDrag {\r\n\tpublic function new() {\r\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function(event) {\r\n\t\t\tconsole.info('${App.NAME} Dom ready :: build: ${App.getBuildDate()} ');\r\n\t\t\tinit1();\r\n\t\t});\r\n\t}\r\n\r\n\tfunction init1() {\r\n\t\tvar svgs:Array<SVGElement> = cast document.getElementsByTagName('svg');\r\n\r\n\t\ttrace('svgs : ' + svgs.length);\r\n\t\tfor (i in 0...svgs.length) {\r\n\t\t\tvar _svg:SVGElement = cast svgs[i];\r\n\t\t\t// wrap svg with postitioner.. to make sure we will remove it!\r\n\t\t\twrap(_svg);\r\n\t\t\tvar children = (_svg.children);\r\n\t\t\tfor (i in children) {\r\n\t\t\t\tvar child:GraphicsElement = cast i;\r\n\t\t\t\tchild.setAttribute('class', 'shadow draggable');\r\n\t\t\t\t// console.log(child.tagName);\r\n\t\t\t\tmakeDraggable(child);\r\n\t\t\t\t// child.onclick = function() {\r\n\t\t\t\t// \tconsole.log(child);\r\n\t\t\t\t// }\r\n\t\t\t\tswitch (child.tagName) {\r\n\t\t\t\t\tcase 'g':\r\n\t\t\t\t\t\ttrace('deeper in the rabithole');\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// http://www.petercollingridge.co.uk/tutorials/svg/interactive/dragging/\r\n\tvar selectedElement:GraphicsElement;\r\n\tvar offset:Point;\r\n\tvar transform:Transform;\r\n\tvar bbox:Rect;\r\n\tvar minX:Float;\r\n\tvar maxX:Float;\r\n\tvar minY:Float;\r\n\tvar maxY:Float;\r\n\tvar confined:Bool;\r\n\r\n\tvar boundaryX1:Float = 10.5;\r\n\tvar boundaryX2:Float = 30;\r\n\tvar boundaryY1:Float = 2.2;\r\n\tvar boundaryY2:Float = 19.2;\r\n\r\n\tfunction makeDraggable(el:GraphicsElement) {\r\n\t\ttrace('makeDraggable \"${el.tagName}\"');\r\n\t\tvar svg = el;\r\n\t\tsvg.addEventListener('mousedown', startDrag);\r\n\t\tsvg.addEventListener('mousemove', drag);\r\n\t\tsvg.addEventListener('mouseup', endDrag);\r\n\t\tsvg.addEventListener('mouseleave', endDrag);\r\n\t\t// touch\r\n\t\t// svg.addEventListener('touchstart', startDrag);\r\n\t\t// svg.addEventListener('touchmove', drag);\r\n\t\t// svg.addEventListener('touchend', endDrag);\r\n\t\t// svg.addEventListener('touchleave', endDrag);\r\n\t\t// svg.addEventListener('touchcancel', endDrag);\r\n\t}\r\n\r\n\tfunction getMousePosition(evt:MouseEvent):Point {\r\n\t\tvar svg:SVGElement = cast untyped evt.explicitOriginalTarget.farthestViewportElement;\r\n\t\tvar CTM = svg.getScreenCTM();\r\n\t\t// for now no touch\r\n\t\t// if (evt.touches != null) {\r\n\t\t// \tevt = evt.touches[0];\r\n\t\t// }\r\n\t\treturn {\r\n\t\t\tx: (evt.clientX - CTM.e) / CTM.a,\r\n\t\t\ty: (evt.clientY - CTM.f) / CTM.d\r\n\t\t};\r\n\t}\r\n\r\n\tfunction startDrag(evt:MouseEvent) {\r\n\t\tvar svg:SVGElement = cast untyped evt.explicitOriginalTarget.farthestViewportElement;\r\n\t\t// if (cast(evt.target, DOMElement).classList.contains('draggable')) {\r\n\t\tselectedElement = cast evt.target;\r\n\r\n\t\t// trace(selectedElement);\r\n\t\toffset = getMousePosition(evt);\r\n\r\n\t\t// trace(offset);\r\n\r\n\t\t// Make sure the first transform on the element is a translate transform\r\n\t\tvar transforms = selectedElement.transform.baseVal;\r\n\r\n\t\t// trace(transforms);\r\n\t\tif (transforms.length == 0 || transforms.getItem(0).type != Transform.SVG_TRANSFORM_TRANSLATE) {\r\n\t\t\t// Create an transform that translates by (0, 0)\r\n\t\t\tvar translate = svg.createSVGTransform();\r\n\t\t\ttranslate.setTranslate(0, 0);\r\n\t\t\tselectedElement.transform.baseVal.insertItemBefore(translate, 0);\r\n\t\t}\r\n\r\n\t\t// Get initial translation\r\n\t\ttransform = transforms.getItem(0);\r\n\t\toffset.x -= transform.matrix.e;\r\n\t\toffset.y -= transform.matrix.f;\r\n\r\n\t\tconfined = cast(evt.target, DOMElement).classList.contains('confine');\r\n\t\tif (confined) {\r\n\t\t\tbbox = selectedElement.getBBox();\r\n\t\t\tminX = boundaryX1 - bbox.x;\r\n\t\t\tmaxX = boundaryX2 - bbox.x - bbox.width;\r\n\t\t\tminY = boundaryY1 - bbox.y;\r\n\t\t\tmaxY = boundaryY2 - bbox.y - bbox.height;\r\n\t\t}\r\n\t\t// }\r\n\t}\r\n\r\n\tfunction drag(evt:MouseEvent) {\r\n\t\tif (selectedElement != null) {\r\n\t\t\tevt.preventDefault();\r\n\r\n\t\t\tvar coord = getMousePosition(evt);\r\n\t\t\tvar dx = coord.x - offset.x;\r\n\t\t\tvar dy = coord.y - offset.y;\r\n\r\n\t\t\tif (confined) {\r\n\t\t\t\tif (dx < minX) {\r\n\t\t\t\t\tdx = minX;\r\n\t\t\t\t} else if (dx > maxX) {\r\n\t\t\t\t\tdx = maxX;\r\n\t\t\t\t}\r\n\t\t\t\tif (dy < minY) {\r\n\t\t\t\t\tdy = minY;\r\n\t\t\t\t} else if (dy > maxY) {\r\n\t\t\t\t\tdy = maxY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ttransform.setTranslate(dx, dy);\r\n\t\t}\r\n\t}\r\n\r\n\tfunction endDrag(evt:MouseEvent) {\r\n\t\tselectedElement = null;\r\n\t}\r\n\r\n\tfunction wrap(el:DOMElement) {\r\n\t\t// create wrapper container\r\n\t\tvar wrapper = document.createDivElement();\r\n\t\twrapper.className = 'cc-svg-drag-wrapper';\r\n\t\tel.parentNode.insertBefore(wrapper, el);\r\n\t\twrapper.appendChild(el);\r\n\t}\r\n\r\n\tstatic public function main() {\r\n\t\tvar app = new MainSVGDrag();\r\n\t}\r\n}\r\n\r\ntypedef Point = {\r\n\tvar x:Float;\r\n\tvar y:Float;\r\n};\r\n","package;\n\nimport haxe.macro.Context;\n\nclass App {\n\tpublic static var NAME:String = \"[cc-svg-drag]\";\n\n\tpublic static inline macro function getBuildDate() {\n\t\t#if !display\n\t\tvar date = Date.now().toString();\n\t\treturn macro $v{date};\n\t\t#else\n\t\tvar date = Date.now().toString();\n\t\treturn macro $v{date};\n\t\t#end\n\t}\n}\n","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\nimport js.Boot;\nimport js.Syntax;\n\n@:keepInit\n@:coreApi class Std {\n\tpublic static inline function is(v:Dynamic, t:Dynamic):Bool {\n\t\treturn @:privateAccess js.Boot.__instanceof(v, t);\n\t}\n\n\tpublic static inline function downcast<T:{}, S:T>(value:T, c:Class<S>):S@:privateAccess {\n\t\treturn if (js.Boot.__downcastCheck(value, c)) cast value else null;\n\t}\n\n\t@:deprecated('Std.instance() is deprecated. Use Std.downcast() instead.')\n\tpublic static inline function instance<T:{}, S:T>(value:T, c:Class<S>):S {\n\t\treturn downcast(value, c);\n\t}\n\n\t@:pure\n\tpublic static function string(s:Dynamic):String {\n\t\treturn @:privateAccess js.Boot.__string_rec(s, \"\");\n\t}\n\n\tpublic static inline function int(x:Float):Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\t@:pure\n\tpublic static function parseInt(x:String):Null<Int> {\n\t\tif(x != null) {\n\t\t\tfor(i in 0...x.length) {\n\t\t\t\tvar c = StringTools.fastCodeAt(x, i);\n\t\t\t\tif(c <= 8 || (c >= 14 && c != ' '.code && c != '-'.code)) {\n\t\t\t\t\tvar v:Int = Syntax.code('parseInt({0}, ({0}[{1}]==\"x\" || {0}[{1}]==\"X\") ? 16 : 10)', x, i + 1);\n\t\t\t\t\treturn Math.isNaN(v) ? null : v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static inline function parseFloat(x:String):Float {\n\t\treturn untyped __js__(\"parseFloat\")(x);\n\t}\n\n\tpublic static function random(x:Int):Int {\n\t\treturn x <= 0 ? 0 : Math.floor(Math.random() * x);\n\t}\n\n\tstatic function __init__():Void\n\t\tuntyped {\n\t\t\t__feature__(\"js.Boot.getClass\", String.prototype.__class__ = __feature__(\"Type.resolveClass\", $hxClasses[\"String\"] = String, String));\n\t\t\t__feature__(\"js.Boot.isClass\", String.__name__ = __feature__(\"Type.getClassName\", \"String\", true));\n\t\t\t__feature__(\"Type.resolveClass\", $hxClasses[\"Array\"] = Array);\n\t\t\t__feature__(\"js.Boot.isClass\", Array.__name__ = __feature__(\"Type.getClassName\", \"Array\", true));\n\t\t\t__feature__(\"Date.*\", {\n\t\t\t\t__feature__(\"js.Boot.getClass\",\n\t\t\t\t\t__js__('Date').prototype.__class__ = __feature__(\"Type.resolveClass\", $hxClasses[\"Date\"] = __js__('Date'), __js__('Date')));\n\t\t\t\t__feature__(\"js.Boot.isClass\", __js__('Date').__name__ = \"Date\");\n\t\t\t});\n\t\t\t__feature__(\"Int.*\", __js__('var Int = { };'));\n\t\t\t__feature__(\"Dynamic.*\", __js__('var Dynamic = { };'));\n\t\t\t__feature__(\"Float.*\", __js__('var Float = Number'));\n\t\t\t__feature__(\"Bool.*\", __js__('var Bool = Boolean'));\n\t\t\t__feature__(\"Class.*\", __js__('var Class = { };'));\n\t\t\t__feature__(\"Enum.*\", __js__('var Enum = { };'));\n\t\t\t#if (js_es < 5)\n\t\t\t__feature__(\"Array.map\", if (Array.prototype.map == null) Array.prototype.map = function(f) {\n\t\t\t\tvar a = [];\n\t\t\t\tfor (i in 0...__this__.length)\n\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\treturn a;\n\t\t\t});\n\t\t\t__feature__(\"Array.filter\", if (Array.prototype.filter == null) Array.prototype.filter = function(f) {\n\t\t\t\tvar a = [];\n\t\t\t\tfor (i in 0...__this__.length) {\n\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\tif (f(e))\n\t\t\t\t\t\ta.push(e);\n\t\t\t\t}\n\t\t\t\treturn a;\n\t\t\t});\n\t\t\t#end\n\t\t}\n}\n","/*\n * Copyright (C)2005-2019 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage js;\n\nimport js.Syntax; // import it here so it's always available in the compiler\n\nprivate class HaxeError extends js.lib.Error {\n\tvar val:Dynamic;\n\n\t@:pure\n\tpublic function new(val:Dynamic) {\n\t\tsuper();\n\t\tthis.val = val;\n\t\tif ((cast js.lib.Error).captureStackTrace)\n\t\t\t(cast js.lib.Error).captureStackTrace(this, HaxeError);\n\t}\n\n\tpublic static function wrap(val:Dynamic):js.lib.Error {\n\t\treturn if (js.Syntax.instanceof(val, js.lib.Error)) val else new HaxeError(val);\n\t}\n\n\tstatic function __init__() {\n\t\tjs.lib.Object.defineProperty((cast HaxeError).prototype, \"message\", {get: () -> (cast String)(js.Lib.nativeThis.val)});\n\t}\n}\n\n@:dox(hide)\nclass Boot {\n\tstatic inline function isClass(o:Dynamic):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isInterface(o:Class<Dynamic>):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isInterface\", o.__isInterface__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic):Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\t@:pure static function getClass(o:Null<Dynamic>):Null<Dynamic> {\n\t\tif (o == null) {\n\t\t\treturn null;\n\t\t} else if (Std.is(o, Array)) {\n\t\t\treturn Array;\n\t\t} else {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o, s:String) {\n\t\tuntyped {\n\t\t\tif (o == null)\n\t\t\t\treturn \"null\";\n\t\t\tif (s.length >= 5)\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = js.Syntax.typeof(o);\n\t\t\tif (t == \"function\" && (isClass(o) || isEnum(o)))\n\t\t\t\tt = \"object\";\n\t\t\tswitch (t) {\n\t\t\t\tcase \"object\":\n\t\t\t\t\t#if !js_enums_as_arrays\n\t\t\t\t\t__feature__(\"has_enum\", if (o.__enum__) {\n\t\t\t\t\t\tvar e = $hxEnums[o.__enum__];\n\t\t\t\t\t\tvar n = e.__constructs__[o._hx_index];\n\t\t\t\t\t\tvar con = e[n];\n\t\t\t\t\t\tif (con.__params__) {\n\t\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\t\treturn n + \"(\" + [for (p in (con.__params__ : Array<String>)) __string_rec(o[p], s)].join(\",\") + \")\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t#end\n\t\t\t\t\tif (js.Syntax.instanceof(o, Array)) {\n\t\t\t\t\t\t#if js_enums_as_arrays\n\t\t\t\t\t\t__feature__(\"has_enum\", if (o.__enum__) {\n\t\t\t\t\t\t\tif (o.length == 2)\n\t\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\t\tvar str = o[0] + \"(\";\n\t\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\t\tfor (i in 2...o.length) {\n\t\t\t\t\t\t\t\tif (i != 2)\n\t\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i], s);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tstr += __string_rec(o[i], s);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t\t});\n\t\t\t\t\t\t#end\n\t\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor (i in 0...o.length)\n\t\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\") + __string_rec(o[i], s);\n\t\t\t\t\t\tstr += \"]\";\n\t\t\t\t\t\treturn str;\n\t\t\t\t\t}\n\t\t\t\t\tvar tostr;\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t\t} catch (e:Dynamic) {\n\t\t\t\t\t\t// strange error on IE\n\t\t\t\t\t\treturn \"???\";\n\t\t\t\t\t}\n\t\t\t\t\tif (tostr != null && tostr != __js__(\"Object.toString\") && js.Syntax.typeof(tostr) == \"function\") {\n\t\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\t\tif (s2 != \"[object Object]\")\n\t\t\t\t\t\t\treturn s2;\n\t\t\t\t\t}\n\t\t\t\t\tvar str = \"{\\n\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t\tvar k:String = null;\n\t\t\t\t\t__js__(\"for( {0} in {1} ) {\", k, o);\n\t\t\t\t\tif (hasp && !o.hasOwnProperty(k))\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif (k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\")\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif (str.length != 2)\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \" + __string_rec(o[k], s);\n\t\t\t\t\t__js__(\"}\");\n\t\t\t\t\ts = s.substring(1);\n\t\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\t\treturn str;\n\t\t\t\tcase \"function\":\n\t\t\t\t\treturn \"<function>\";\n\t\t\t\tcase \"string\":\n\t\t\t\t\treturn o;\n\t\t\t\tdefault:\n\t\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\t@:pure private static function __interfLoop(cc:Dynamic, cl:Dynamic) {\n\t\tif (cc == null)\n\t\t\treturn false;\n\t\tif (cc == cl)\n\t\t\treturn true;\n\t\tif (js.lib.Object.prototype.hasOwnProperty.call(cc, \"__interfaces__\")) {\n\t\t\tvar intf:Dynamic = cc.__interfaces__;\n\t\t\tfor (i in 0...intf.length) {\n\t\t\t\tvar i:Dynamic = intf[i];\n\t\t\t\tif (i == cl || __interfLoop(i, cl))\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn __interfLoop(cc.__super__, cl);\n\t}\n\n\t@:ifFeature(\"typed_catch\") @:pure private static function __instanceof(o:Dynamic, cl:Dynamic) {\n\t\tif (cl == null)\n\t\t\treturn false;\n\t\tswitch (cl) {\n\t\t\tcase Int:\n\t\t\t\treturn js.Syntax.typeof(o) == \"number\" && js.Syntax.strictEq(o | 0, o);\n\t\t\tcase Float:\n\t\t\t\treturn js.Syntax.typeof(o) == \"number\";\n\t\t\tcase Bool:\n\t\t\t\treturn js.Syntax.typeof(o) == \"boolean\";\n\t\t\tcase String:\n\t\t\t\treturn js.Syntax.typeof(o) == \"string\";\n\t\t\tcase Array:\n\t\t\t\treturn js.Syntax.instanceof(o, Array) #if js_enums_as_arrays && o.__enum__ == null #end;\n\t\t\tcase Dynamic:\n\t\t\t\treturn o != null;\n\t\t\tdefault:\n\t\t\t\tif (o != null) {\n\t\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\t\tif (js.Syntax.typeof(cl) == \"function\") {\n\t\t\t\t\t\tif (__downcastCheck(o, cl))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else if (js.Syntax.typeof(cl) == \"object\" && __isNativeObj(cl)) {\n\t\t\t\t\t\tif (js.Syntax.instanceof(o, cl))\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\t// do not use isClass/isEnum here\n\t\t\t\tuntyped __feature__(\"Class.*\", if (cl == Class && o.__name__ != null) return true);\n\t\t\t\tuntyped __feature__(\"Enum.*\", if (cl == Enum && o.__ename__ != null) return true);\n\t\t\t\t#if js_enums_as_arrays\n\t\t\t\treturn o.__enum__ == cl;\n\t\t\t\t#else\n\t\t\t\treturn untyped __feature__(\n\t\t\t\t\t\"has_enum\",\n\t\t\t\t\tif (o.__enum__ != null) ($hxEnums[o.__enum__]) == cl else false,\n\t\t\t\t\tfalse\n\t\t\t\t);\n\t\t\t\t#end\n\t\t}\n\t}\n\n\tstatic function __downcastCheck(o:Dynamic, cl:Class<Dynamic>):Bool {\n\t\treturn js.Syntax.instanceof(o, cl) || (isInterface(cl) && inline __implements(o, cl));\n\t}\n\n\tstatic function __implements(o:Dynamic, iface:Class<Dynamic>):Bool {\n\t\treturn __interfLoop(getClass(o), iface);\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o:Dynamic, t:Dynamic) {\n\t\tif (o == null || __instanceof(o, t))\n\t\t\treturn o;\n\t\telse\n\t\t\tthrow \"Cannot cast \" + Std.string(o) + \" to \" + Std.string(t);\n\t}\n\n\tstatic var __toStr:js.lib.Function;\n\n\tstatic function __init__() {\n\t\tBoot.__toStr = (cast {}).toString;\n\t}\n\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name:String = __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) {\n\t\treturn js.Lib.global[cast name];\n\t}\n}\n"],
"names":[],
"mappings":"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"
}